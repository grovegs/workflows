name: ðŸŽ¨ Format Package

on:
    workflow_call:
        inputs:
            runs-on:
                description: The type of runner to use (ubuntu-latest, macos-latest, or self-hosted label)
                required: false
                type: string
                default: "ubuntu-latest"
            files:
                description: File patterns to format using Prettier such as **/*.{yml,yaml,json,md,sh}
                required: false
                type: string
                default: ""
            dotnet-project:
                description: Path to the .NET project to format such as "src/Core"
                required: false
                type: string
                default: ""
            dotnet-test-project:
                description: Path to the .NET test project to format such as "tests/Core.Tests"
                required: false
                type: string
                default: ""
            global-json-file:
                description: The relative path to the global.json file to extract .NET version
                required: false
                type: string
                default: ""

jobs:
    format-files:
        name: Format Files
        if: inputs.files != ''
        runs-on: ${{ inputs.runs-on }}

        steps:
            - name: ðŸ“‚ Checkout Code
              uses: actions/checkout@v5

            - name: ðŸŽ¨ Format Files
              uses: grovegs/actions/.github/actions/format-files@v1.0.4
              with:
                  files: ${{ inputs.files }}

    format-dotnet:
        name: Format .NET
        if: inputs.dotnet-project != ''
        runs-on: ${{ inputs.runs-on }}

        steps:
            - name: ðŸ“‚ Checkout Code
              uses: actions/checkout@v5

            - name: ðŸ”§ Setup .NET
              uses: grovegs/actions/.github/actions/setup-dotnet@v1.0.4
              with:
                  global-json-file: ${{ inputs.global-json-file }}
                  cache: ${{ github.ref == 'refs/heads/main' || github.ref == 'refs/heads/develop' }}

            - name: ðŸŽ¨ Format .NET Project
              uses: grovegs/actions/.github/actions/format-dotnet@v1.0.4
              with:
                  project: ${{ inputs.dotnet-project }}

    format-dotnet-test:
        name: Format .NET Test
        if: inputs.dotnet-test-project != ''
        runs-on: ${{ inputs.runs-on }}

        steps:
            - name: ðŸ“‚ Checkout Code
              uses: actions/checkout@v5

            - name: ðŸ”§ Setup .NET
              uses: grovegs/actions/.github/actions/setup-dotnet@v1.0.4
              with:
                  global-json-file: ${{ inputs.global-json-file }}
                  cache: ${{ github.ref == 'refs/heads/main' || github.ref == 'refs/heads/develop' }}

            - name: ðŸŽ¨ Format .NET Test Project
              uses: grovegs/actions/.github/actions/format-dotnet@v1.0.4
              with:
                  project: ${{ inputs.dotnet-test-project }}
