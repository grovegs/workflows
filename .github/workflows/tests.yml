name: ðŸ§ª Tests

on:
    push:
        branches:
            - main
            - develop
    pull_request:
        branches:
            - main
            - develop

permissions:
    contents: read

jobs:
    test-package-workflows:
        name: Test Package Workflows
        runs-on: ubuntu-latest

        steps:
            - name: ðŸ“‚ Checkout Code
              uses: actions/checkout@v5

            - name: ðŸ§ª Test .NET Package
              uses: ./.github/workflows/package-tests.yml
              with:
                  dotnet-tests: '["sandbox/ConsoleApplication"]'
                  global-json-file: sandbox/ConsoleApplication/global.json

    test-project-workflows:
        name: Test Project Workflows
        runs-on: macos-latest

        steps:
            - name: ðŸ“‚ Checkout Code
              uses: actions/checkout@v5

            - name: ðŸ§ª Test Godot Project
              uses: ./.github/workflows/project-tests.yml
              with:
                  godot-projects: '["sandbox/GodotApplication"]'
                  global-json-file: sandbox/GodotApplication/global.json

            - name: ðŸ§ª Test Unity Project
              uses: ./.github/workflows/project-tests.yml
              with:
                  unity-projects: '["sandbox/UnityApplication"]'

    test-format-workflows:
        name: Test Format Workflows
        runs-on: ubuntu-latest

        steps:
            - name: ðŸ“‚ Checkout Code
              uses: actions/checkout@v5

            - name: ðŸŽ¨ Test Package Format (Multiple Projects)
              uses: ./.github/workflows/package-format.yml
              with:
                  dotnet-projects: '["sandbox/ConsoleApplication", "sandbox/GodotApplication"]'
                  global-json-file: sandbox/ConsoleApplication/global.json

            - name: ðŸŽ¨ Test Godot Project Format
              uses: ./.github/workflows/project-format.yml
              with:
                  dotnet-projects: '["sandbox/GodotApplication"]'
                  global-json-file: sandbox/GodotApplication/global.json

            - name: ðŸŽ¨ Test Unity Project Format
              uses: ./.github/workflows/project-format.yml
              with:
                  dotnet-projects: '["sandbox/UnityApplication"]'
