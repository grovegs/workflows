name: ðŸ§ª Tests

on:
    push:
        branches:
            - main
            - develop
    pull_request:
        branches:
            - main
            - develop

permissions:
    contents: read

jobs:
    test-package-tests:
        name: Test Package Workflows
        uses: ./.github/workflows/package-tests.yml
        with:
            dotnet-project: sandbox/ConsoleApplication
            global-json-file: sandbox/ConsoleApplication/global.json

    test-godot-project-tests:
        name: Test Godot Project
        uses: ./.github/workflows/project-tests.yml
        with:
            godot-project: sandbox/GodotApplication
            global-json-file: sandbox/GodotApplication/global.json

    test-unity-project-tests:
        name: Test Unity Project
        uses: ./.github/workflows/project-tests.yml
        with:
            unity-project: sandbox/UnityApplication

    test-package-format:
        name: Test Package Format
        uses: ./.github/workflows/package-format.yml
        with:
            dotnet-project: sandbox/ConsoleApplication
            global-json-file: sandbox/ConsoleApplication/global.json

    test-project-format:
        name: Test Project Format
        uses: ./.github/workflows/project-format.yml
        with:
            dotnet-project: sandbox/ConsoleApplication
            global-json-file: sandbox/ConsoleApplication/global.json

    test-release-package:
        name: Test Release Package
        uses: ./.github/workflows/package-release.yml
        with:
            name: Test Package
            version-type: patch
            dotnet-project: sandbox/ConsoleApplication
            godot-addon: sandbox/GodotApplication/addons/TestAddon
            unity-package: sandbox/UnityApplication/Packages/com.test.package
            global-json-file: sandbox/ConsoleApplication/global.json
            publish-github: false
            publish-nuget: false
            publish-discord: false
        secrets:
            github-token: ${{ secrets.GITHUB_TOKEN }}

    test-release-project:
        name: Test Release Project
        uses: ./.github/workflows/project-release.yml
        with:
            name: Test Project
            version-type: patch
            godot-project: sandbox/GodotApplication
            unity-project: sandbox/UnityApplication
            global-json-file: sandbox/GodotApplication/global.json
            build-android: false
            build-ios: false
            publish-github: false
            publish-firebase: false
            publish-testflight: false
            publish-discord: false
        secrets:
            github-token: ${{ secrets.GITHUB_TOKEN }}
